"use strict";(self.webpackChunku_modeler_manual=self.webpackChunku_modeler_manual||[]).push([[5585],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),g=i,m=c["".concat(s,".").concat(g)]||c[g]||u[g]||o;return a?n.createElement(m,r(r({ref:t},d),{},{components:a})):n.createElement(m,r({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},87960:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(87462),i=(a(67294),a(3905));const o={slug:"/usage-guide/checkpoint-lora-vae",sidebar_position:3},r="Apply Checkpoint, LoRA, VAE",l={unversionedId:"ai-texturing/usage-guide/checkpoint-lora-vae",id:"ai-texturing/usage-guide/checkpoint-lora-vae",title:"Apply Checkpoint, LoRA, VAE",description:"To apply Checkpoint, LoRA, and VAE, you must first download the relevant files. While it is possible to generate textures using the Stable Diffusion web UI alone, these model files must be downloaded and applied for optimal quality.",source:"@site/docs/ai-texturing/usage-guide/checkpoint-lora-vae.md",sourceDirName:"ai-texturing/usage-guide",slug:"/usage-guide/checkpoint-lora-vae",permalink:"/docs/usage-guide/checkpoint-lora-vae",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"/usage-guide/checkpoint-lora-vae",sidebar_position:3},sidebar:"docs",previous:{title:"webui-user.bat command line parameters",permalink:"/docs/usage-guide/webui-user-bat-cli-parameters"},next:{title:"Negative Embedding",permalink:"/docs/usage-guide/negative-embedding"}},s={},p=[{value:"<strong>Download the models</strong>",id:"download-the-models",level:2},{value:"Civitai",id:"civitai",level:3},{value:"Hugging Face",id:"hugging-face",level:3},{value:"Github",id:"github",level:3},{value:"<strong>Apply Model</strong>",id:"apply-model",level:2},{value:"Apply Checkpoint",id:"apply-checkpoint",level:3},{value:"Apply LoRA",id:"apply-lora",level:3},{value:"Applying a VAE",id:"applying-a-vae",level:3},{value:"<strong>.ckpt and .safetensors</strong>",id:"ckpt-and-safetensors",level:2},{value:".ckpt format",id:"ckpt-format",level:3},{value:".safetensors format",id:"safetensors-format",level:3}],d={toc:p};function c(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"apply-checkpoint-lora-vae"},"Apply Checkpoint, LoRA, VAE"),(0,i.kt)("p",null,"To apply ",(0,i.kt)("strong",{parentName:"p"},"Checkpoint, LoRA, and VAE"),", you must first download the relevant files. **While it is possible to generate textures using the Stable Diffusion web UI alone, these model files must be downloaded and applied for optimal quality."),(0,i.kt)("p",null,"The guide below details how to ",(0,i.kt)("strong",{parentName:"p"},"download")," and ",(0,i.kt)("strong",{parentName:"p"},"apply")," the models."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"download-the-models"},(0,i.kt)("strong",{parentName:"h2"},"Download the models")),(0,i.kt)("h3",{id:"civitai"},"Civitai"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Civitai")," is a Stable Diffusion ",(0,i.kt)("strong",{parentName:"p"},"AI model sharing platform"),". You can search for multiple models, read reviews, and download them."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://civitai.com/"},"Civitai")," ")),(0,i.kt)("h3",{id:"hugging-face"},"Hugging Face"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"https://huggingface.co/"},"Hugging Face"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"https://huggingface.co/stabilityai"},"Hugging Face by Stability AI")))),(0,i.kt)("h3",{id:"github"},"Github"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/Stability-AI"},"Stability AI's Github"))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"apply-model"},(0,i.kt)("strong",{parentName:"h2"},"Apply Model")),(0,i.kt)("h3",{id:"apply-checkpoint"},"Apply Checkpoint"),(0,i.kt)("p",null,"To use the downloaded ",(0,i.kt)("strong",{parentName:"p"},"Checkpoint file")," in the Stable Diffusion web UI and AI texturing in UModeler X, you need to place the file in a specific path and apply it."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Copy the downloaded ",(0,i.kt)("strong",{parentName:"li"},"Checkpoint file")," to the ",(0,i.kt)("inlineCode",{parentName:"li"},"stable-diffusion-webui/models/Stable-diffusion")," folder.\n",(0,i.kt)("img",{alt:"Alt text",src:a(68752).Z,width:"1369",height:"420"})),(0,i.kt)("li",{parentName:"ol"},"In the Stable Diffusion web UI, ",(0,i.kt)("strong",{parentName:"li"},"refresh")," the list by ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"clicking"))," the button next to the ",(0,i.kt)("strong",{parentName:"li"},"Stable Diffusion checkpoint area")," in the top left corner.\n",(0,i.kt)("img",{alt:"Alt text",src:a(61638).Z,width:"1275",height:"449"})),(0,i.kt)("li",{parentName:"ol"},"After refreshing, you can see the newly added ",(0,i.kt)("strong",{parentName:"li"},"Checkpoint")," in the drop-down menu.\n",(0,i.kt)("img",{alt:"Alt text",src:a(5775).Z,width:"1281",height:"445"}))),(0,i.kt)("h3",{id:"apply-lora"},"Apply LoRA"),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"LoRa file")," must also be placed in a specific path to be applied."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"copy the downloaded ",(0,i.kt)("strong",{parentName:"li"},"LoRa file")," to the ",(0,i.kt)("inlineCode",{parentName:"li"},"stable-diffusion-webui/models/Lora")," folder.\n",(0,i.kt)("img",{alt:"Alt text",src:a(82580).Z,width:"1260",height:"400"})),(0,i.kt)("li",{parentName:"ol"},"In the Stable Diffusion web UI, under the ",(0,i.kt)("strong",{parentName:"li"},"Generate button"),", ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"click"))," the ",(0,i.kt)("strong",{parentName:"li"},"Show/Hide extra networks button"),".\n",(0,i.kt)("img",{alt:"Alt text",src:a(14869).Z,width:"1233",height:"441"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"Click"))," on the Lora tab in the area shown below.\n",(0,i.kt)("img",{alt:"Alt text",src:a(90674).Z,width:"1990",height:"668"}),"\n4.",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"Click"))," the ",(0,i.kt)("strong",{parentName:"li"},"Refresh button")," on the right side to display the LoRAs you put in the route.\n",(0,i.kt)("img",{alt:"Alt text",src:a(48290).Z,width:"2088",height:"1178"}),"\n5.When you ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"click"))," on that LoRA, it will be entered into the prompt and the application will be complete.\n",(0,i.kt)("img",{alt:"Alt text",src:a(87265).Z,width:"2196",height:"1480"}))),(0,i.kt)("h3",{id:"applying-a-vae"},"Applying a VAE"),(0,i.kt)("p",null,"You can also apply a ",(0,i.kt)("strong",{parentName:"p"},"VAE file")," by placing it in a specific path, but the process is a little different."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"copy the downloaded ",(0,i.kt)("strong",{parentName:"li"},"VAE file")," to the ",(0,i.kt)("inlineCode",{parentName:"li"},"stable-diffusion-webui/models/VAE")," folder.\n",(0,i.kt)("img",{alt:"Alt text",src:a(50353).Z,width:"1289",height:"406"})),(0,i.kt)("li",{parentName:"ol"},"In the ",(0,i.kt)("strong",{parentName:"li"},"Stable Diffusion web UI"),", ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"click"))," the ",(0,i.kt)("strong",{parentName:"li"},"Settings tab"),".\n",(0,i.kt)("img",{alt:"Alt text",src:a(14581).Z,width:"1668",height:"621"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"Click"))," on ",(0,i.kt)("strong",{parentName:"li"},"Stable Diffusion"),", then ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"click"))," on the ",(0,i.kt)("strong",{parentName:"li"},"Refresh button")," in the ",(0,i.kt)("strong",{parentName:"li"},"SD VAE"),".\n",(0,i.kt)("img",{alt:"Alt text",src:a(83382).Z,width:"2091",height:"700"})),(0,i.kt)("li",{parentName:"ol"},"After refreshing, you will see the newly added VAE in the drop-down menu.\n",(0,i.kt)("img",{alt:"Alt text",src:a(73333).Z,width:"1814",height:"413"})),(0,i.kt)("li",{parentName:"ol"},"After selecting the desired VAE, ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"strong"},"click"))," the ",(0,i.kt)("strong",{parentName:"li"},"Apply settings button")," to apply it.\n",(0,i.kt)("img",{alt:"Alt text",src:a(71371).Z,width:"2063",height:"340"}))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"ckpt-and-safetensors"},(0,i.kt)("strong",{parentName:"h2"},".ckpt and .safetensors")),(0,i.kt)("p",null,"The models involved in ",(0,i.kt)("strong",{parentName:"p"},"Stable Diffusion")," are distributed in two formats: ",(0,i.kt)("strong",{parentName:"p"},".ckpt")," and ",(0,i.kt)("strong",{parentName:"p"},".safetensors"),"."),(0,i.kt)("p",null,"Given the differences and issues with each format, we recommend downloading in the ",(0,i.kt)("strong",{parentName:"p"},".safetensors format")," whenever possible. Below we detail the differences between these two formats and the ",(0,i.kt)("strong",{parentName:"p"},"potential issues")," with the ",(0,i.kt)("strong",{parentName:"p"},".ckpt format"),"."),(0,i.kt)("h3",{id:"ckpt-format"},".ckpt format"),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},".ckpt format")," is used to ",(0,i.kt)("strong",{parentName:"p"},"store intermediate training states")," of a deep learning model (that's why it's called a ",(0,i.kt)("strong",{parentName:"p"},"Checkpoint Checkpoint"),"). This format makes it convenient to re-experiment or tune the model later."),(0,i.kt)("p",null,"However, the ",(0,i.kt)("strong",{parentName:"p"},".ckpt format")," uses Python's ",(0,i.kt)("strong",{parentName:"p"},"pickle pickle module")," to store data, which can have security issues. "),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("h2",{parentName:"admonition",id:"pickle-module"},"pickle module"),(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("strong",{parentName:"p"},"pickle module"),' helps Python save data to a file in binary format ("serialization") and retrieve it back ("deserialization").'),(0,i.kt)("p",{parentName:"admonition"},"It's a bit like ",(0,i.kt)("strong",{parentName:"p"},"canning")," food and ",(0,i.kt)("strong",{parentName:"p"},"taking it out later"),", and it ensures that you don't lose important data when you quit your program. However, you need to be careful when deserializing data from ",(0,i.kt)("strong",{parentName:"p"},"untrusted sources")," due to security concerns.")),(0,i.kt)("p",null,"With a ",(0,i.kt)("strong",{parentName:"p"},"maliciously written .ckpt file"),", arbitrary code can be executed when ",(0,i.kt)("strong",{parentName:"p"},"opening (un-pickling) the file"),", putting your PC at risk of attack."),(0,i.kt)("p",null,"Below are some of the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/pickle.html"},(0,i.kt)("strong",{parentName:"a"},"official documentation"))," warnings for the ",(0,i.kt)("strong",{parentName:"p"},"pickle module"),"."),(0,i.kt)("admonition",{title:"Warning",type:"caution"},(0,i.kt)("h2",{parentName:"admonition",id:"the-pickle-module-is-insecure"},"The ",(0,i.kt)("inlineCode",{parentName:"h2"},"pickle")," module is insecure."),(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"pickle")," module is ",(0,i.kt)("strong",{parentName:"p"},"insecure"),". Unpickle only trusted data."),(0,i.kt)("p",{parentName:"admonition"},"It is possible to construct malicious pickle data that ",(0,i.kt)("strong",{parentName:"p"},"executes arbitrary code when unpickled"),". Never unpickle data that may have come from an untrusted source or may have been tampered with.")),(0,i.kt)("h3",{id:"safetensors-format"},".safetensors format"),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},".safetensors format")," is a new file format that addresses security vulnerabilities in existing .ckpt files while enabling faster model loading."),(0,i.kt)("p",null,"We recommend using the ",(0,i.kt)("strong",{parentName:"p"},".safetensors format")," and ",(0,i.kt)("strong",{parentName:"p"},"most newer models")," are now distributed in this format."),(0,i.kt)("hr",null))}c.isMDXComponent=!0},68752:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_checkpoint_1-7cd6b14610e4b5b270fac88678e52be4.png"},61638:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_checkpoint_2-e6846ba92e0b336f4956b5cc3b55861f.png"},5775:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_checkpoint_3-b5902c2320fe95aa9a62b4eff29c1e0d.png"},82580:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_lora_1-5888f4730ae8d3fa3db89f88848d579e.png"},14869:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_lora_2-19d5ac8dbffd541231e768bad3bd1dc7.png"},90674:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_lora_3-fc71f1ff7f25588942e7c2432549aaae.png"},48290:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_lora_4-83a3ca277848c4c32d095efcc236070b.png"},87265:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_lora_5-547b0384d44b3d7e199cbf91fb12cf7c.png"},50353:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_vae_1-20391ea567c12d7291870584966845c9.png"},14581:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_vae_2-a611a56a4f7a7173011dc223df7e666b.png"},83382:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_vae_3-6bd0abb6a8306eaa6089569adc304d9d.png"},73333:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_vae_4-41cfe8ffd56d77a20751de90b84b36cb.png"},71371:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-guide_vae_5-992453ab0b4a96cf4444d556f191e617.png"}}]);